import{i as D,h as H,e as b,r as P,w as A,f as Y,o as i,a as V,b as E,u as n,n as c,R as x,k as f,v as T,E as M,q as g,p as w,s as ee,G as X,D as ae,S as le,J as oe,a6 as Z,$ as re,a7 as ie,m as se,y as Q,x as ue,A as me,F as de,C as pe}from"./vue.esm-bundler-n0I0yAQQ.js";import{N as ce}from"./Input-HlZKb6H5.js";import{N as fe,a as ve}from"./Option-C6esXb-N.js";import{N as J}from"./InputLabel-1asJLeWN.js";import{N as ye}from"./Checkbox-SO13JOnK.js";import{t as ge}from"./index-W0bHMUxF.js";import{E as B}from"./index-APieC4ix.js";import{l as he}from"./index-fxRCy6s1.js";import{b as be,d as Ve,u as Ie,_ as Te,w as Ce}from"./plugin-vue_export-helper--E4ECpVB.js";import{i as j}from"./icon-vJoYfTtu.js";import{i as ke}from"./index--U1-PwNl.js";import{U as F,C as $,I as K}from"./event-vOXeFsAk.js";import{h as O,i as _}from"./constants-qxKQHgGp.js";import{u as Se,a as we}from"./use-form-item-zLZL6zko.js";import{u as Ne,b as Ee}from"./use-form-common-props-PVTz91X1.js";import{u as qe}from"./index-qGKqiPQK.js";import{a as Re}from"./style-vlcBzdj4.js";import{d as Be,t as Pe}from"./error-zcWxX9t3.js";import{_ as Ae}from"./_plugin-vue_export-helper-x3n3nnut.js";const Oe=be({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:j},inactiveIcon:{type:j},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:Ve(Function)},size:{type:String,validator:ke},tabindex:{type:[String,Number]}}),Ue={[F]:t=>O(t)||D(t)||_(t),[$]:t=>O(t)||D(t)||_(t),[K]:t=>O(t)||D(t)||_(t)},Le=["onClick"],ze=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],De=["aria-hidden"],Me=["aria-hidden"],_e=["aria-hidden"],G="ElSwitch",Fe=H({name:G}),$e=H({...Fe,props:Oe,emits:Ue,setup(t,{expose:r,emit:s}){const l=t,m=le(),{formItem:u}=Se(),h=Ne(),o=Ie("switch");qe({from:'"value"',replacement:'"model-value" or "v-model"',scope:G,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},b(()=>{var a;return!!((a=m.vnode.props)!=null&&a.value)}));const{inputId:U}=we(l,{formItemContext:u}),k=Ee(b(()=>l.loading)),C=P(l.modelValue!==!1),I=P(),L=P(),N=b(()=>[o.b(),o.m(h.value),o.is("disabled",k.value),o.is("checked",e.value)]),z=b(()=>({width:Re(l.width)}));A(()=>l.modelValue,()=>{C.value=!0}),A(()=>l.value,()=>{C.value=!1});const q=b(()=>C.value?l.modelValue:l.value),e=b(()=>q.value===l.activeValue);[l.activeValue,l.inactiveValue].includes(q.value)||(s(F,l.inactiveValue),s($,l.inactiveValue),s(K,l.inactiveValue)),A(e,a=>{var y;I.value.checked=a,l.validateEvent&&((y=u==null?void 0:u.validate)==null||y.call(u,"change").catch(ne=>Be()))});const d=()=>{const a=e.value?l.inactiveValue:l.activeValue;s(F,a),s($,a),s(K,a),oe(()=>{I.value.checked=e.value})},p=()=>{if(k.value)return;const{beforeChange:a}=l;if(!a){d();return}const y=a();[Z(y),O(y)].includes(!0)||Pe(G,"beforeChange must return type `Promise<boolean>` or `boolean`"),Z(y)?y.then(W=>{W&&d()}).catch(W=>{}):y&&d()},v=b(()=>o.cssVarBlock({...l.activeColor?{"on-color":l.activeColor}:null,...l.inactiveColor?{"off-color":l.inactiveColor}:null,...l.borderColor?{"border-color":l.borderColor}:null})),S=()=>{var a,y;(y=(a=I.value)==null?void 0:a.focus)==null||y.call(a)};return Y(()=>{I.value.checked=e.value}),r({focus:S,checked:e}),(a,y)=>(i(),V("div",{class:c(n(N)),style:X(n(v)),onClick:ae(p,["prevent"])},[E("input",{id:n(U),ref_key:"input",ref:I,class:c(n(o).e("input")),type:"checkbox",role:"switch","aria-checked":n(e),"aria-disabled":n(k),name:a.name,"true-value":a.activeValue,"false-value":a.inactiveValue,disabled:n(k),tabindex:a.tabindex,onChange:d,onKeydown:x(p,["enter"])},null,42,ze),!a.inlinePrompt&&(a.inactiveIcon||a.inactiveText)?(i(),V("span",{key:0,class:c([n(o).e("label"),n(o).em("label","left"),n(o).is("active",!n(e))])},[a.inactiveIcon?(i(),f(n(B),{key:0},{default:T(()=>[(i(),f(M(a.inactiveIcon)))]),_:1})):g("v-if",!0),!a.inactiveIcon&&a.inactiveText?(i(),V("span",{key:1,"aria-hidden":n(e)},w(a.inactiveText),9,De)):g("v-if",!0)],2)):g("v-if",!0),E("span",{ref_key:"core",ref:L,class:c(n(o).e("core")),style:X(n(z))},[a.inlinePrompt?(i(),V("div",{key:0,class:c(n(o).e("inner"))},[a.activeIcon||a.inactiveIcon?(i(),f(n(B),{key:0,class:c(n(o).is("icon"))},{default:T(()=>[(i(),f(M(n(e)?a.activeIcon:a.inactiveIcon)))]),_:1},8,["class"])):a.activeText||a.inactiveText?(i(),V("span",{key:1,class:c(n(o).is("text")),"aria-hidden":!n(e)},w(n(e)?a.activeText:a.inactiveText),11,Me)):g("v-if",!0)],2)):g("v-if",!0),E("div",{class:c(n(o).e("action"))},[a.loading?(i(),f(n(B),{key:0,class:c(n(o).is("loading"))},{default:T(()=>[ee(n(he))]),_:1},8,["class"])):g("v-if",!0)],2)],6),!a.inlinePrompt&&(a.activeIcon||a.activeText)?(i(),V("span",{key:1,class:c([n(o).e("label"),n(o).em("label","right"),n(o).is("active",n(e))])},[a.activeIcon?(i(),f(n(B),{key:0},{default:T(()=>[(i(),f(M(a.activeIcon)))]),_:1})):g("v-if",!0),!a.activeIcon&&a.activeText?(i(),V("span",{key:1,"aria-hidden":!n(e)},w(a.activeText),9,_e)):g("v-if",!0)],2)):g("v-if",!0)],14,Le))}});var Ke=Te($e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const Ge=Ce(Ke),He=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,We={validate:t=>typeof t=="string"&&t.trim()||typeof t=="number"||typeof t=="boolean"?!1:{messageKey:"formInput.validator.fieldRequired"}},Xe={validate:(t,r)=>typeof t=="string"&&t.length<r.minimum?{messageKey:"formInput.validator.minCharactersRequired",options:r}:!1},Ze={validate:(t,r)=>typeof t=="string"&&t.length>r.maximum?{messageKey:"formInput.validator.maxCharactersRequired",options:r}:!1},Qe={validate:(t,r)=>typeof t!="string"?!1:(t.match(/\d/g)||[]).length<r.minimum?{messageKey:"formInput.validator.numbersRequired",options:r}:!1},Je={validate:t=>He.test(String(t).trim().toLowerCase())?!1:{messageKey:"formInput.validator.validEmailRequired"}},je={validate:(t,r)=>typeof t!="string"?!1:(t.match(/[A-Z]/g)||[]).length<r.minimum?{messageKey:"formInput.validator.uppercaseCharsRequired",options:r}:!1},Ye={validate:(t,r)=>r.regex.test(`${t}`)?!1:{message:r.message,options:r}},xe={rules:[{rules:[{name:"MIN_LENGTH",config:{minimum:8}},{name:"CONTAINS_NUMBER",config:{minimum:1}},{name:"CONTAINS_UPPERCASE",config:{minimum:1}}],defaultError:{messageKey:"formInput.validator.defaultPasswordRequirements"}},{name:"MAX_LENGTH",config:{maximum:64}}]},ea={REQUIRED:We,MIN_LENGTH:Xe,MAX_LENGTH:Ze,CONTAINS_NUMBER:Qe,VALID_EMAIL:Je,CONTAINS_UPPERCASE:je,DEFAULT_PASSWORD_RULES:xe,MATCH_REGEX:Ye},R=(t,r,s,l)=>{if(s.hasOwnProperty("rules")){const m=s.rules;for(let u=0;u<m.length;u++){if(m[u].hasOwnProperty("rules")){const h=R(t,r,m[u],l);if(h)return h}if(m[u].hasOwnProperty("name")){const h=m[u];if(!r[h.name])continue;const o=R(t,r,r[h.name],h.config);if(o&&"defaultError"in s&&s.defaultError)return s.defaultError;if(o)return o}}}else if(s.hasOwnProperty("validate"))return s.validate(t,l);return!1},aa=["textContent"],ta=["textContent"],te=H({__name:"FormInput",props:{modelValue:{type:[String,Number,Boolean,null]},label:{},infoText:{},required:{type:Boolean},showRequiredAsterisk:{type:Boolean,default:!0},type:{default:"text"},placeholder:{},tooltipText:{},showValidationWarnings:{type:Boolean},validateOnBlur:{type:Boolean,default:!0},documentationUrl:{},documentationText:{default:"Open docs"},validationRules:{},validators:{},maxlength:{},options:{},autocomplete:{},name:{},focusInitially:{type:Boolean},labelSize:{default:"medium"},disabled:{type:Boolean},activeLabel:{},activeColor:{},inactiveLabel:{},inactiveColor:{},teleported:{type:Boolean,default:!0},tagSize:{default:"small"}},emits:["validate","update:modelValue","focus","blur","enter"],setup(t,{expose:r,emit:s}){const l=t,m=s,u=re({hasBlurred:!1,isTyping:!1}),h=ie(),o=P(null);function U(){const e=l.validationRules||[],d={...ea,...l.validators||{}};if(l.required){const p=R(l.modelValue,d,d.REQUIRED);if(p)return p}for(let p=0;p<e.length;p++){if(e[p].hasOwnProperty("name")){const v=e[p];if(d[v.name]){const S=R(l.modelValue,d,d[v.name],v.config);if(S)return S}}if(e[p].hasOwnProperty("rules")){const v=e[p],S=R(l.modelValue,d,v);if(S)return S}}return null}function k(){u.hasBlurred=!0,u.isTyping=!1,m("blur")}function C(e){u.isTyping=!0,m("update:modelValue",e)}function I(){m("focus")}function L(e){e.stopPropagation(),e.preventDefault(),m("enter")}const N=b(()=>{const e=U();return e?e.messageKey?ge(e.messageKey,e.options):e.message:null}),z=b(()=>!!h.default),q=b(()=>!!N.value&&(l.validateOnBlur&&u.hasBlurred&&!u.isTyping||l.showValidationWarnings));return Y(()=>{m("validate",!N.value),l.focusInitially&&o.value&&o.value.focus()}),A(()=>N.value,e=>m("validate",!e)),r({inputRef:o}),(e,d)=>{const p=pe("n8n-link");return e.type==="checkbox"?(i(),f(n(ye),se({key:0},e.$props,{ref_key:"inputRef",ref:o,"onUpdate:modelValue":C,onFocus:I}),null,16)):e.type==="toggle"?(i(),f(n(J),{key:1,"input-name":e.name,label:e.label,"tooltip-text":e.tooltipText,required:e.required&&e.showRequiredAsterisk},{content:T(()=>[Q(w(e.tooltipText),1)]),default:T(()=>[ee(n(Ge),{"model-value":e.modelValue,"active-color":e.activeColor,"inactive-color":e.inactiveColor,"onUpdate:modelValue":C},null,8,["model-value","active-color","inactive-color"])]),_:1},8,["input-name","label","tooltip-text","required"])):(i(),f(n(J),{key:2,"input-name":e.name,label:e.label,"tooltip-text":e.tooltipText,required:e.required&&e.showRequiredAsterisk},{default:T(()=>[E("div",{class:c(q.value?e.$style.errorInput:""),onKeydown:[d[0]||(d[0]=ae(()=>{},["stop"])),x(L,["enter"])]},[z.value?ue(e.$slots,"default",{key:0}):e.type==="select"||e.type==="multi-select"?(i(),f(n(fe),{key:1,ref_key:"inputRef",ref:o,class:c({[e.$style.multiSelectSmallTags]:e.tagSize==="small"}),"model-value":e.modelValue,placeholder:e.placeholder,multiple:e.type==="multi-select",disabled:e.disabled,name:e.name,teleported:e.teleported,"onUpdate:modelValue":C,onFocus:I,onBlur:k},{default:T(()=>[(i(!0),V(de,null,me(e.options||[],v=>(i(),f(n(ve),{key:v.value,value:v.value,label:v.label,disabled:!!v.disabled,size:"small"},null,8,["value","label","disabled"]))),128))]),_:1},8,["class","model-value","placeholder","multiple","disabled","name","teleported"])):(i(),f(n(ce),{key:2,ref_key:"inputRef",ref:o,name:e.name,type:e.type,placeholder:e.placeholder,"model-value":e.modelValue,maxlength:e.maxlength,autocomplete:e.autocomplete,disabled:e.disabled,"onUpdate:modelValue":C,onBlur:k,onFocus:I},null,8,["name","type","placeholder","model-value","maxlength","autocomplete","disabled"]))],34),q.value?(i(),V("div",{key:0,class:c(e.$style.errors)},[E("span",{textContent:w(N.value)},null,8,aa),e.documentationUrl&&e.documentationText?(i(),f(p,{key:0,to:e.documentationUrl,"new-window":!0,size:"small",theme:"danger"},{default:T(()=>[Q(w(e.documentationText),1)]),_:1},8,["to"])):g("",!0)],2)):e.infoText?(i(),V("div",{key:1,class:c(e.$style.infoText)},[E("span",{size:"small",textContent:w(e.infoText)},null,8,ta)],2)):g("",!0)]),_:3},8,["input-name","label","tooltip-text","required"]))}}}),na="_infoText_1ls5d_1",la="_errors_1ls5d_8 _infoText_1ls5d_1",oa="_errorInput_1ls5d_13",ra="_multiSelectSmallTags_1ls5d_17",ia={infoText:na,errors:la,errorInput:oa,multiSelectSmallTags:ra},sa={$style:ia},Ea=Ae(te,[["__cssModules",sa]]);te.__docgenInfo={exportName:"default",displayName:"FormInput",description:"",tags:{},expose:[{name:"inputRef"}],props:[{name:"modelValue",required:!0,type:{name:"Validatable"}},{name:"label",required:!0,type:{name:"string"}},{name:"infoText",required:!1,type:{name:"string"}},{name:"required",required:!1,type:{name:"boolean"}},{name:"showRequiredAsterisk",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"type",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'text'"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"tooltipText",required:!1,type:{name:"string"}},{name:"showValidationWarnings",required:!1,type:{name:"boolean"}},{name:"validateOnBlur",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"documentationUrl",required:!1,type:{name:"string"}},{name:"documentationText",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Open docs'"}},{name:"validationRules",required:!1,type:{name:"Array",elements:[{name:"union",elements:[{name:"Rule"},{name:"RuleGroup"}]}]}},{name:"validators",required:!1,type:{name:"{ [key: string]: IValidator | RuleGroup }"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"options",required:!1,type:{name:"Array",elements:[{name:"{ value: string | number; label: string; disabled?: boolean }"}]}},{name:"autocomplete",required:!1,type:{name:"string"}},{name:"name",required:!1,type:{name:"string"}},{name:"focusInitially",required:!1,type:{name:"boolean"}},{name:"labelSize",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"medium"'}]},defaultValue:{func:!1,value:"'medium'"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"activeLabel",required:!1,type:{name:"string"}},{name:"activeColor",required:!1,type:{name:"string"}},{name:"inactiveLabel",required:!1,type:{name:"string"}},{name:"inactiveColor",required:!1,type:{name:"string"}},{name:"teleported",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"tagSize",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"medium"'}]},defaultValue:{func:!1,value:"'small'"}}],events:[{name:"validate",type:{names:["boolean"]}},{name:"update:modelValue",type:{names:["unknown"]}},{name:"focus"},{name:"blur"},{name:"enter"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/flowease-storybook/flowease-storybook/packages/design-system/src/components/N8nFormInput/FormInput.vue"]};export{Ge as E,Ea as N};
