import{h as _,r as k,e as u,o as r,k as d,H as I,v as n,x as C,a as $,A as w,F as V,m as f,u as a,n as z,s as q}from"./vue.esm-bundler-n0I0yAQQ.js";import{N as x}from"./UserInfo-tm1-PBoj.js";import{N as P,a as b}from"./Option-C6esXb-N.js";import{u as F}from"./useI18n-bvZy21or.js";import{_ as B}from"./_plugin-vue_export-helper-x3n3nnut.js";const c=_({__name:"UserSelect",props:{users:{default:()=>[]},modelValue:{default:""},ignoreIds:{default:()=>[]},currentUserId:{default:""},placeholder:{},size:{}},emits:["blur","focus"],setup(p,{emit:N}){const o=p,i=N,{t:m}=F(),l=k(""),v=u(()=>o.users.filter(e=>e.isPendingUser||!e.email||o.ignoreIds.includes(e.id)?!1:e.fullName&&e.fullName.toLowerCase().includes(l.value.toLowerCase())?!0:e.email.includes(l.value))),y=u(()=>[...v.value].sort((e,s)=>{if(e.lastName&&s.lastName&&e.lastName!==s.lastName)return e.lastName>s.lastName?1:-1;if(e.firstName&&s.firstName&&e.firstName!==s.firstName)return e.firstName>s.firstName?1:-1;if(!e.email||!s.email)throw new Error("Expected all users to have email");return e.email>s.email?1:-1})),g=e=>{l.value=e},h=()=>i("blur"),U=()=>i("focus"),S=e=>e.fullName?`${e.fullName} (${e.email})`:e.email;return(e,s)=>(r(),d(a(P),f({"data-test-id":"user-select-trigger"},e.$attrs,{"model-value":e.modelValue,filterable:!0,"filter-method":g,placeholder:e.placeholder||a(m)("nds.userSelect.selectUser"),"default-first-option":!0,teleported:"","popper-class":e.$style.limitPopperWidth,"no-data-text":a(m)("nds.userSelect.noMatchingUsers"),size:e.size,onBlur:h,onFocus:U}),I({default:n(()=>[(r(!0),$(V,null,w(y.value,t=>(r(),d(a(b),{key:t.id,value:t.id,class:z(e.$style.itemContainer),label:S(t),disabled:t.disabled},{default:n(()=>[q(a(x),f(t,{"is-current-user":e.currentUserId===t.id}),null,16,["is-current-user"])]),_:2},1032,["value","class","label","disabled"]))),128))]),_:2},[e.$slots.prefix?{name:"prefix",fn:n(()=>[C(e.$slots,"prefix")]),key:"0"}:void 0]),1040,["model-value","placeholder","popper-class","no-data-text","size"]))}}),E="_itemContainer_6ofyv_1",L="_limitPopperWidth_6ofyv_6",W={itemContainer:E,limitPopperWidth:L},A={$style:W},G=B(c,[["__cssModules",A]]);c.__docgenInfo={exportName:"default",displayName:"UserSelect",description:"",tags:{},props:[{name:"users",required:!1,type:{name:"Array",elements:[{name:"IUser"}]},defaultValue:{func:!1,value:"() => []"}},{name:"modelValue",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"ignoreIds",required:!1,type:{name:"Array",elements:[{name:"string"}]},defaultValue:{func:!1,value:"() => []"}},{name:"currentUserId",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"size",required:!1,type:{name:"Exclude",elements:[{name:"SelectSize"},{name:'"xlarge"'}]}}],events:[{name:"blur"},{name:"focus"}],slots:[{name:"prefix"}],sourceFiles:["/home/runner/work/flowease-storybook/flowease-storybook/packages/design-system/src/components/N8nUserSelect/UserSelect.vue"]};export{G as N};
